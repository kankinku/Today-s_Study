#MCP #ClaudeCode #Whimsical #워크플로우  
작성일: 2026년 1월 29일

---

## 1. 문제 정의 또는 한계 상황

Claude Code로 설계·분해·검증을 진행할 때, 결과물을 “문장”으로만 유지하면 구조적 관계(흐름, 의존, 분기)가 쉽게 붕괴한다. 특히 멀티 에이전트/단계형 플랜에서는 산출물이 길어질수록 “현재의 구조 상태”를 한 눈에 확인하기 어렵고, 수정 지시가 누적될수록 문서-구조 불일치가 발생한다. 따라서 텍스트 산출물을 즉시 “도식(Flow/Diagram)”으로 변환해 구조를 외부화하고, 이후 변경을 다시 프롬프트로 되돌려 반영하는 루프가 필요해진다.

---

## 2. 도입된 기술 또는 구조

도입되는 구조는 “Claude Code ↔ MCP 서버 ↔ Whimsical” 연결이다.

- **Whimsical MCP Server(로컬 실행)**: Claude가 호출 가능한 MCP 서버로 동작하며, 도식 생성/수정 작업을 Whimsical API로 위임한다.
    
- **Claude Code의 MCP 설정(mcpServers)**: 로컬 MCP 서버의 실행 커맨드(node)와 엔트리포인트(dist/index.js)를 등록한다.
    
- **Whimsical 인증 상태(로그인)**: 설치 이전에 Whimsical 로그인 세션이 준비되어 있어야 도식 작업이 즉시 성립한다.
    

이 구조는 “반복적인 외부 연동을 MCP로 모듈화해 여러 작업 흐름에서 재사용한다”는 컨텍스트 엔지니어링의 전형적인 형태다.

[학습 보고서] 클로드 코드 기반 에이전틱(Agentic…

---

## 3. 작동 메커니즘 How

사용자가 공유한 설치 절차를 “동작 관점”으로 재구성하면 다음 흐름이다.

1. **서버 코드 확보**
    

- `git clone <repo> ~/whimsical-mcp-server`
    
- 목적: 로컬에서 실행 가능한 MCP 서버 소스를 확보해, Claude가 “도식화 도구”를 호출할 수 있게 만든다.
    

2. **빌드 산출물 생성**
    

- `cd ~/whimsical-mcp-server`
    
- `npm install`
    
- `npm run build`
    
- 목적: Claude Code 설정에서 직접 실행할 **dist/index.js**(런타임 엔트리) 생성.
    

3. **Claude Code의 MCP 서버 레지스트리에 등록**
    

- 설정 파일에 다음 형태로 등록(요지):
    
    - 서버 이름: `whimsical`
        
    - 실행: `node`
        
    - 인자: `C:/Users/ONSTAR/whimsical-mcp-server/dist/index.js`
        
- 의미: Claude는 “whimsical”이라는 도구를 사용할 때, 내부적으로 `node <dist/index.js>`를 실행해 MCP 세션을 연다.
    

4. **Claude Code 재시작**
    

- 목적: MCP 서버 레지스트리 로딩 및 툴 목록 갱신.
    

5. **프롬프트 기반 도식 생성/수정 루프**
    

- 예: “구독 Churn 분해를 플로우차트로 그려줘”
    
- 이후: “이 분기 조건을 ‘연체’로 바꾸고, 이 노드를 retention 캠페인으로 연결해줘”처럼 텍스트 수정 지시로 도식이 반복 갱신된다.
    

---

## 4. 선택의 이유 Why

이 방식이 필요한 이유는 “텍스트만으로는 구조를 유지하기 어렵다”가 아니라, 더 정확히는 **컨텍스트 손실과 중간 소실을 줄이기 위해 구조를 외부 시스템(도식)으로 고정**하기 위함이다. 도식은 (1) 현재 설계의 상태를 시각적으로 고정하고, (2) 변경 요청을 구조 단위로 정밀하게 만들며, (3) 에이전트가 다음 행동을 결정할 때 참조할 안정적인 기준점을 제공한다. 이런 “외부 도구 연동을 MCP로 표준화”하면, 매번 프롬프트로 UI/포맷을 설명하지 않고도 동일한 도식화 파이프라인을 반복 실행할 수 있다.

[학습 보고서] 클로드 코드 기반 에이전틱(Agentic…

또한 Claude Code 계열 워크플로우에서 규칙/설정이 길어질수록 유지보수가 망가지기 쉬운데, MCP 등록과 같은 “부팅에 필요한 최소 설정”만 루트에 두고 나머지를 분리하는 방식이 재현성과 안정성을 높인다.

[가이드] Agent가 망가지는 이유

[가이드] ClaudeCoding

---

## 5. 구조적 시사점

- **도식화는 ‘출력 포맷’이 아니라 ‘컨텍스트 고정 장치’**로 기능한다. 즉, 기획/아키텍처/리서치 결과를 다음 단계 구현으로 넘길 때, 텍스트 요약보다 구조적 손실이 적다.
    
- MCP로 도식 도구를 붙이면, 이후에는 Whimsical뿐 아니라 “다른 시각화/검증/수집 도구”도 동일한 패턴으로 확장 가능하다(서버 추가 등록만으로 툴 체계 확장).
    
- 운영 관점에서 중요한 것은 “설치 성공”이 아니라 **Claude가 어떤 상황에서 도식을 생성/갱신해야 하는지(트리거/규칙)와 산출물의 저장·참조 규약**을 정해 재사용 가능한 워크플로우로 만드는 것이다.
    
    [가이드] ClaudeCoding